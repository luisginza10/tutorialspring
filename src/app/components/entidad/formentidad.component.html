<div class="container">
  <div class="row">
    <div class="col s12">
      <div class="card">
        <div class="card-content">
          <span class="card-title">Entidad</span>

          <form (ngSubmit)="saveOrUpdate()">
             <div class="row">
                <div class="input-field col s12">
                    <input name="nombrerazon" type="text" [(ngModel)]="entidad.nombrerazon" class="validate" required="" aria-required="true">
                    <label for="nombrerazon" [ngClass]="!entidad.nombrerazon ?'':'active'">Nombre o razón social</label>
                </div>
                <div class="input-field col s12">
                  <input type="text" name="ciruc" [(ngModel)]="entidad.ciruc">
                  <label for="ciruc" [ngClass]="!entidad.ciruc ?'':'active'">Nº de documento</label>
                </div>
                <div class="input-field col s12">
                  <input type="text" name="direccion" [(ngModel)]="entidad.direccion">
                  <label for="direccion" [ngClass]="!entidad.direccion ?'':'active'">Dirección o localidad</label>
                </div>
                <div class="input-field col s12">
                  <input type="email" name="email" [(ngModel)]="entidad.email">
                  <label for="email" [ngClass]="!entidad.email ?'':'active'">Correo electrónico</label>
                </div>
                <div class="input-field col s12">
                  <input type="text" name="telefono" [(ngModel)]="entidad.telefono">
                  <label for="telefono" [ngClass]="!entidad.telefono ?'':'active'">Teléfono</label>
                </div>
                <div class="input-field col s12">
                  <input type="text" name="celular" [(ngModel)]="entidad.celular">
                  <label for="celular" [ngClass]="!entidad.celular ?'':'active'">Celular</label>
                </div>
                <div class="input-field col s12">
                    <select [compareWith]="comparaRegion" class="browser-default" name="region" [(ngModel)]="entidad.region" style="width:300px;">
                        <option [ngValue]="undefined" disabled selected>---Seleccione una región---</option>
                      <option *ngFor="let region of regiones" [ngValue]="region">{{region.descripcion}}</option>
                    </select>
                    <!--<label for="region" *ngIf="!entidad.region"> Seleccione una región..</label>-->
                </div>
             </div>
             <div class="card-action">
                <div class="input-field col s12">
                  <button class="btn right" style="margin-left: 2px;">Guardar</button>
                </div>
              </div>
              <h5>Facturas</h5>
              <p [routerLink]="['/facturas/form', entidad.id]">Agregar <i class="material-icons">add</i></p>
              <div class="alert card blue lighten-4 blue-text text-darken-3" *ngIf="entidad.facturas?.length == 0 && id != null">
                 <div class="card-content">
                   <p><i class="material-icons">info</i><span>Info:</span> No hay facturas asignadas para la entidad</p>
                 </div>
             </div>
        </form>
        <div class="row">
            <!--
            <div class="msg msg-error z-depth-3 scale-transition"> Error Message </div>
              <div class="msg msg-info z-depth-3">Info Message</div>
              <div class="msg msg-alert z-depth-3">Alert Message</div>
              <div class="msg z-depth-3">Basic Message</div>
            -->

            <table class="striped centered" *ngIf="entidad.facturas?.length > 0">
              <thead>
                <tr>
                  <th>Código</th>
                  <th>Fecha</th>
                  <th>Condición</th>
                  <th>Total</th>
                  <th>Detalles</th>
                  <th>Anular</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let factura of entidad.facturas">
                  <td>{{factura.id}}</td>
                  <td>{{factura.fecha}}</td>
                  <td>{{factura.condicion}}</td>
                  <td>{{factura.total}}</td>
                  <td><i class="material-icons" [routerLink]="['/facturas', factura.id]">create</i></td>
                  <td><i class="material-icons" (click)="anulaFactura(factura)">delete</i></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
<!--
  <div class="row">
    <form class="col s12">
        <div class="row">
            <div class="input-field col s12">
                <input id="email2" type="email" class="validate" required="" aria-required="true">
                <label for="email2">Email</label>
            </div>
            <div class="input-field col s12">
                <input id="example" name="example" type="text" class="validate" required="" aria-required="true">
                <label for="example">Field</label>
            </div>
            <div class="input-field col s12">
                <button class="btn waves-effect waves-light" type="submit" name="action">Submit</button>
            </div>
        </div>
    </form>
</div>
-->
